这是文档 **第 81-90 页** 的翻译，主要涵盖了 **第 5.2 节：概念：AUTOSAR ECU 配置到 XDM 的映射**。

这一部分非常关键，它详细列出了 AUTOSAR 标准中的各种定义（Def）和值（Value）是如何具体转换为 EB tresos Studio 使用的 XDM 格式的。

---

### 5.2. 概念：AUTOSAR ECU 配置到 XDM 的映射 (Concepts: Mapping AUTOSAR ECU Configuration to XDM)

AUTOSAR 定义了用于描述 ECU 配置及其参数定义的 XML 格式。EB tresos Studio 使用 XDM 格式来存储这些信息。本节描述 AUTOSAR 元素如何映射到 XDM 节点。

#### 5.2.1. 节点映射 (Node mapping)

**ECU 参数定义 (ECU Parameter Definition)** 将在 DataModel 中表示为 **Schema 树 (schema-tree)**，而 **ECU 配置描述 (ECU Configuration Description)** 将表示为 **Data 树 (data-tree)**。所有 AUTOSAR 节点都将被映射到 DataModel 的节点。

#### 5.2.1.1. Schema 节点 (Schema-Nodes)

**5.2.1.1.1. AR-PACKAGE**
没有对应的 Data 节点。

* **XDM 映射：**
```xml
<d:ctr type="AR-PACKAGE"/>

```



**5.2.1.1.2. MODULE-DEF**
对应的 Data 节点：见 5.2.1.14.2 节 "MODULE-CONFIGURATION"。

* **XDM 映射：**
```xml
<v:ctr name="myModule" type="MODULE-DEF"/>

```



**5.2.1.1.3. PARAM-CONF-CONTAINER-DEF**
对应的 Data 节点：见 5.2.1.14.3 节 "CONTAINER"。

| 简单形式 (Simple) | 带有外围列表的形式 (With surrounding list) |
| --- | --- |
| `<v:ctr name="myCtr" type="IDENTIFIABLE"/>` | `<v:lst name="myCtr" type="MAP">`<br>

<br>`  <v:ctr name="myCtr" type="IDENTIFIABLE"/>`<br>

<br>`</v:lst>` |

**5.2.1.1.4. MULTIPLE-CONFIGURATION-CONTAINER**
标签 `MULTIPLE-CONFIGURATION-CONTAINER` 只能包含在 `PARAM-CONF-CONTAINER-DEF` 中，并将此容器标记为多重配置集。此信息在 Data 树中不可见。在 XDM 文件中，Schema 树和 Data 树中总是存在一个列表！
对应的 Data 节点：见 5.2.1.14.3 节 "CONTAINER"。

* **XDM 映射 (带有外围列表)：**
```xml
<v:lst name="DioConfiguration" type="MULTIPLE-CONFIGURATION-CONTAINER">
  <a:da name="MIN" value="1"/>
  <v:ctr name="DioConfiguration" type="MULTIPLE-CONFIGURATION-CONTAINER">
  </v:ctr>
</v:lst>

```



**5.2.1.1.5. BOOLEAN-PARAM-DEF**
对应的 Data 节点：见 5.2.1.14.5 节 "BOOLEAN-VALUE"。

| 简单形式 | 带有外围列表的形式 |
| --- | --- |
| `<v:var name="bit" type="BOOLEAN"/>` | `<v:lst name="bit">`<br>

<br>`  <v:var name="bit" type="BOOLEAN"/>`<br>

<br>`</v:lst>` |

**5.2.1.1.6. INTEGER-PARAM-DEF**
对应的 Data 节点：见 5.2.1.14.6 节 "INTEGER-VALUE"。 *(注：原文此处误写为引向 FLOAT-PARAM-DEF，实际应对应 Integer)*

| 简单形式 | 带有外围列表的形式 |
| --- | --- |
| `<v:var name="myInt" type="INTEGER"/>` | `<v:lst name="myInt">`<br>

<br>`  <v:var name="myInt" type="INTEGER"/>`<br>

<br>`</v:lst>` |

**5.2.1.1.7. FLOAT-PARAM-DEF**
对应的 Data 节点：见 5.2.1.14.7 节 "FLOAT-VALUE"。

| 简单形式 | 带有外围列表的形式 |
| --- | --- |
| `<v:var name="myFloat" type="FLOAT"/>` | `<v:lst name="value">`<br>

<br>`  <v:var name="value" type="FLOAT"/>`<br>

<br>`</v:lst>` |

**5.2.1.1.8. STRING-PARAM-DEF**
对应的 Data 节点：见 5.2.1.14.8 节 "STRING-VALUE"。

| 简单形式 | 带有外围列表的形式 |
| --- | --- |
| `<v:var name="myStrg" type="STRING"/>` | `<v:lst name="myStrg">`<br>

<br>`  <v:var name="myStrg" type="STRING"/>`<br>

<br>`</v:lst>` |

**5.2.1.1.9. LINKER-SYMBOL-DEF**
对应的 Data 节点：见 5.2.1.14.9 节 "LINKER-SYMBOL-VALUE"。

| 简单形式 | 带有外围列表的形式 |
| --- | --- |
| `<v:var name="LinkerSymbol" type="LINKER-SYMBOL"/>` | `<v:lst name="LinkerSymbol">`<br>

<br>`  <v:var name="LinkerSymbol" type="LINKER-SYMBOL"/>`<br>

<br>`</v:lst>` |

**5.2.1.1.10. FUNCTION-NAME-DEF**
对应的 Data 节点：见 5.2.1.14.10 节 "FUNCTION-NAME-VALUE"。

| 简单形式 | 带有外围列表的形式 |
| --- | --- |
| `<v:var name="myFunction" type="FUNCTION-NAME"/>` | `<v:lst name="myFunction">`<br>

<br>`  <v:var name="myFunction" type="FUNCTION-NAME"/>`<br>

<br>`</v:lst>` |

**5.2.1.1.11. ENUMERATION-PARAM-DEF**
对应的 Data 节点：见 5.2.1.14.11 节 "ENUMERATION-VALUE"。

| 简单形式 | 带有外围列表的形式 |
| --- | --- |
| `<v:var name="enum" type="ENUMERATION">`<br>

<br>`  <a:da name="RANGE">`<br>

<br>`    <a:v>Enum1</a:v>`<br>

<br>`    <a:v>Enum2</a:v>`<br>

<br>`  </a:da>`<br>

<br>`</v:var>` | `<v:lst name="enum">`<br>

<br>`  <v:var name="enum" type="ENUMERATION">`<br>

<br>`    <a:da name="RANGE">`<br>

<br>`      <a:v>Enum1</a:v>`<br>

<br>`      <a:v>Enum2</a:v>`<br>

<br>`    </a:da>`<br>

<br>`  </v:var>`<br>

<br>`</v:lst>` |

**5.2.1.2. CHOICE-CONTAINER-DEF**
在 AUTOSAR 2.1 之前，AUTOSAR 中没有对应的数据节点标签。但在 tresos 中有一个数据节点：见 5.2.1.14.4 节 "Choices"。从 AUTOSAR 3.0 开始，有一个对应的数据节点标签，它与容器 (CONTAINER) 的标签相同。

**XDM 映射对比 (AUTOSAR 2.x vs 3.x):**
*主要区别在于 3.x 版本中 type 属性通常标记为 "IDENTIFIABLE"，且结构更为统一。*

**5.2.1.3. CHOICE-REFERENCE-DEF**
对应的 Data 节点：见 5.2.1.14.12 节 "REFERENCE-VALUE"。

| 简单形式 | 带有外围列表的形式 |
| --- | --- |
| `<v:ref name="myChrRef" type="CHOICE-REFERENCE">`<br>

<br>`  <a:da name="REF" value="ASPathDataOfSchema:/..."/>`<br>

<br>`  <a:da name="REF-TYPE" value="ASPath"/>`<br>

<br>`</v:ref>` | `<v:lst name="myChrRef">`<br>

<br>`  <v:ref name="myChrRef" type="CHOICE-REFERENCE">`<br>

<br>`    <a:da name="REF" value="ASPathDataOfSchema:/..."/>`<br>

<br>`    <a:da name="REF-TYPE" value="ASPath"/>`<br>

<br>`  </v:ref>`<br>

<br>`</v:lst>` |

**5.2.1.4. REFERENCE-DEF**
对应的 Data 节点：见 5.2.1.14.12 节 "REFERENCE-VALUE"。
*(结构与 CHOICE-REFERENCE 类似，type 为 "REFERENCE")*

**5.2.1.5. SYMBOLIC-NAME-REFERENCE-DEF**
对应的 Data 节点：见 5.2.1.14.12 节 "REFERENCE-VALUE"。
*(结构类似，type 为 "SYMBOLIC-NAME-REFERENCE")*

**5.2.1.6. INSTANCE-REFERENCE-DEF**
对应的 Data 节点：见 5.2.1.14.13 节 "INSTANCE-REFERENCE-VALUE"。

| 简单形式 |
| --- |
| `<v:ctr name="myInst" type="INSTANCE">`<br>

<br>`  <v:ref name="TARGET" type="REFERENCE">`<br>

<br>`    <a:da name="REF" value="ASTyped:RunnableEntity"/>`<br>

<br>`  </v:ref>`<br>

<br>`  <v:lst name="CONTEXT">`<br>

<br>`    <v:ref name="CONTEXT" type="REFERENCE">`<br>

<br>`      <a:da name="RANGE" type="IRefCtxt">`<br>

<br>`        <a:tst expr="ComponentPrototype"/>`<br>

<br>`        <a:tst expr="PortPrototype*"/>`<br>

<br>`      </a:da>`<br>

<br>`    </v:ref>`<br>

<br>`  </v:lst>`<br>

<br>`</v:ctr>` |

**5.2.1.7. FOREIGN-REFERENCE-DEF**
对应的 Data 节点：见 5.2.1.14.12 节 "REFERENCE-VALUE"。
*(结构类似，type 为 "FOREIGN-REFERENCE")*

**5.2.1.8. ECUC-URI-REFERENCE-DEF**
对应的 Data 节点：见 5.2.1.14.12 节 "REFERENCE-VALUE"。
*(结构类似，type 为 "URI-REFERENCE")*。请参阅 5.2.7.1 节 "URI References" 了解其背后的概念。

**5.2.1.9 - 5.2.1.13. DERIVED-*-PARAM-DEF**
这些是派生参数定义（Boolean, Integer, Float, String, Enumeration）。
对应的 Data 节点与非派生版本相同。
**特点：** 在 XDM 中，这些变量会包含一个额外的属性：`<a:a name="DERIVED" value="true"/>`。

---

#### 5.2.1.14. Data 节点 (Data-Nodes)

**5.2.1.14.1. ECU-CONFIGURATION**
没有对应的 Schema 节点。

* **XDM 映射：**
```xml
<d:ctr name="myCfg" type="ECU-CONFIGURATION">
</d:ctr>

```



**5.2.1.14.2. MODULE-CONFIGURATION**
对应的 Schema 节点：见 5.2.1.1.2 节 "MODULE-DEF"。

* **XDM 映射：**
```xml
<d:ctr name="myMod" type="MODULE-CONFIGURATION">
</d:ctr>

```



**5.2.1.14.3. CONTAINER**
对应的 Schema 节点：见 5.2.1.1.3 节 "PARAM-CONF-CONTAINER-DEF"，5.2.1.1.4 节 "MULTIPLE-CONFIGURATION-CONTAINER"。

| 简单形式 | 带有外围列表的形式 |
| --- | --- |
| `<d:ctr name="myCtr" type="IDENTIFIABLE">`<br>

<br>`</d:ctr>` | `<d:lst name="myCtr" type="MAP">`<br>

<br>`  <d:ctr name="myCtr1" type="IDENTIFIABLE">`<br>

<br>`  </d:ctr>`<br>

<br>`  <d:ctr name="myCtr2" type="IDENTIFIABLE">`<br>

<br>`  </d:ctr>`<br>

<br>`</d:lst>` |

**5.2.1.14.4. Choices**
AUTOSAR 2.0 和 2.1 在数据中没有定义 Choices 的 XML 标签，它们只是被省略了。从 AUTOSAR 3.0 开始，Choice 在数据中表示为 CONTAINER。
尽管如此，在 XDM 文件格式的数据树中，始终存在一个 Choice。
对应的 Schema 节点：见 5.2.1.2 节 "CHOICE-CONTAINER-DEF"。

**XDM 映射示例 (AUTOSAR 3.x 带有外围列表):**

```xml
<d:lst name="MyChoice" type="MAP">
  <d:chc name="MyChoice" type="IDENTIFIABLE" value="Ctr1">
    <d:ctr name="Ctr1" type="IDENTIFIABLE"/>
    <d:ctr name="Ctr2" type="IDENTIFIABLE"/>
    <d:ctr name="Ctr3" type="IDENTIFIABLE"/>
  </d:chc>
</d:lst>

```

*注意：`value="Ctr1"` 表示当前选中的是 Ctr1 容器。*

---

**（第 81-90 页翻译结束）**

目前翻译到了 **Data 节点的 Choices (5.2.1.14.4)** 部分。
接下来的几页（91-100）继续介绍了各种具体数值类型（Boolean, Integer 等）的 **Data 节点映射**，以及 **List 节点** 和 **Choice 节点** 在 DataModel 中的特殊表示细节。

**需要继续翻译第 91-100 页吗？**