这是文档 **第 90-96 页** 的翻译内容，这部分内容详细列出了 **Data 节点 (Data-Nodes)** 的各类定义及其在 XDM 中的映射方式（涵盖了从基本类型到复杂引用的所有 AUTOSAR 数据类型），并介绍了属性映射和基于 ECU-PD 的 XPath 寻址机制。

---

### 5.2.1.14. Data 节点 (Data-Nodes)

5.2.1.14.1. ECU-CONFIGURATION

没有对应的 Schema 节点。

- **XDM 映射：**
    
    XML
    
    ```
    <d:ctr name="myCfg" type="ECU-CONFIGURATION">
    </d:ctr>
    ```
    

5.2.1.14.2. MODULE-CONFIGURATION

对应的 Schema 节点：见 5.2.1.1.2 节 "MODULE-DEF"。

- **XDM 映射：**
    
    XML
    
    ```
    <d:ctr name="myMod" type="MODULE-CONFIGURATION">
    </d:ctr>
    ```
    

5.2.1.14.3. CONTAINER

对应的 Schema 节点：见 5.2.1.1.3 节 "PARAM-CONF-CONTAINER-DEF"，5.2.1.1.4 节 "MULTIPLE-CONFIGURATION-CONTAINER"。

|**简单形式 (Simple)**|**带有外围列表的形式 (With surrounding list)**|
|---|---|
|`<d:ctr name="myCtr" type="IDENTIFIABLE">`<br><br>  <br><br>`</d:ctr>`|`<d:lst name="myCtr" type="MAP">`<br><br>  <br><br>`<d:ctr name="myCtr1" type="IDENTIFIABLE">`<br><br>  <br><br>`</d:ctr>`<br><br>  <br><br>`<d:ctr name="myCtr2" type="IDENTIFIABLE">`<br><br>  <br><br>`</d:ctr>`<br><br>  <br><br>`</d:lst>`|

5.2.1.14.4. Choices (选择)

AUTOSAR 2.0 和 2.1 在数据中没有定义 Choices 的 XML 标签，它们只是被省略了。从 AUTOSAR 3.0 开始，Choice 在数据中表示为 CONTAINER。

尽管如此，在 XDM 文件格式的数据树中，始终存在一个 Choice 节点。

对应的 Schema 节点：见 5.2.1.2 节 "CHOICE-CONTAINER-DEF"。

**XDM 映射对比：**

- **Autosar 2.x:**
    
    - **简单形式:**
        
        XML
        
        ```
        <d:chc name="MyChoice" type="CHOICE" value="Ctr1">
          <d:ctr name="Ctr1" type="IDENTIFIABLE"/>
          <d:ctr name="Ctr2" type="IDENTIFIABLE"/>
          <d:ctr name="Ctr3" type="IDENTIFIABLE"/>
        </d:chc>
        ```
        
    - **带有外围列表的形式:**
        
        XML
        
        ```
        <d:lst name="MyChoice" type="MAP">
          <d:chc name="MyChoice" type="CHOICE" value="Ctr1">
            <d:ctr name="Ctr1" type="IDENTIFIABLE"/>
            <d:ctr name="Ctr2" type="IDENTIFIABLE"/>
            <d:ctr name="Ctr3" type="IDENTIFIABLE"/>
          </d:chc>
        </d:lst>
        ```
        
- **Autosar 3.x:**
    
    - **简单形式:**
        
        XML
        
        ```
        <d:chc name="MyChoice" type="IDENTIFIABLE" value="Ctr1">
          <d:ctr name="Ctr1" type="IDENTIFIABLE"/>
          <d:ctr name="Ctr2" type="IDENTIFIABLE"/>
          <d:ctr name="Ctr3" type="IDENTIFIABLE"/>
        </d:chc>
        ```
        
    - **带有外围列表的形式:**
        
        XML
        
        ```
        <d:lst name="MyChoice" type="MAP">
          <d:chc name="MyChoice" type="IDENTIFIABLE" value="Ctr1">
            <d:ctr name="Ctr1" type="IDENTIFIABLE"/>
            <d:ctr name="Ctr2" type="IDENTIFIABLE"/>
            <d:ctr name="Ctr3" type="IDENTIFIABLE"/>
          </d:chc>
        </d:lst>
        ```
        

5.2.1.14.5. BOOLEAN-VALUE (布尔值)

对应的 Schema 节点：见 5.2.1.1.5 节 "BOOLEAN-PARAM-DEF"。

|**简单形式**|**带有外围列表的形式**|
|---|---|
|`<d:var name="myBool" value="true" type="BOOLEAN"/>`|`<d:lst name="myBool">`<br><br>  <br><br>`<d:var name="myBool1" value="true" type="BOOLEAN"/>`<br><br>  <br><br>`<d:var name="myBool2" value="true" type="BOOLEAN"/>`<br><br>  <br><br>`</d:lst>`|

5.2.1.14.6. INTEGER-VALUE (整数值)

对应的 Schema 节点：见 5.2.1.1.6 节 "INTEGER-PARAM-DEF"。

|**简单形式**|**带有外围列表的形式**|
|---|---|
|`<d:var name="myInt" value="5" type="INTEGER"/>`|`<d:lst name="myInt">`<br><br>  <br><br>`<d:var name="myInt1" value="5" type="INTEGER"/>`<br><br>  <br><br>`<d:var name="myInt2" value="5" type="INTEGER"/>`<br><br>  <br><br>`</d:lst>`|

5.2.1.14.7. FLOAT-VALUE (浮点值)

对应的 Schema 节点：见 5.2.1.1.7 节 "FLOAT-PARAM-DEF"。

|**简单形式**|**带有外围列表的形式**|
|---|---|
|`<d:var name="myFloat" value="5.5" type="FLOAT"/>`|`<d:lst name="myFloat">`<br><br>  <br><br>`<d:var name="myFloat1" value="5.5" type="FLOAT"/>`<br><br>  <br><br>`<d:var name="myFloat2" value="5.5" type="FLOAT"/>`<br><br>  <br><br>`</d:lst>`|

5.2.1.14.8. STRING-VALUE (字符串值)

对应的 Schema 节点：见 5.2.1.1.8 节 "STRING-PARAM-DEF"。

|**简单形式**|**带有外围列表的形式**|
|---|---|
|`<d:var name="myStr" value="Hello" type="STRING"/>`|`<d:lst name="myStr">`<br><br>  <br><br>`<d:var name="myStr1" value="Hello" type="STRING"/>`<br><br>  <br><br>`<d:var name="myStr2" value="Hello" type="STRING"/>`<br><br>  <br><br>`</d:lst>`|

5.2.1.14.9. LINKER-SYMBOL-VALUE (链接器符号值)

对应的 Schema 节点：见 5.2.1.1.9 节 "LINKER-SYMBOL-DEF"。

|**简单形式**|**带有外围列表的形式**|
|---|---|
|`<d:var name="LinkerSymbol" type="LINKER-SYMBOL" value="MyLinkerSymbol"/>`|`<d:lst name="LinkerSymbol">`<br><br>  <br><br>`<d:var name="LinkerSymbol1" type="LINKER-SYMBOL" value="MyLinkerSymbol"/>`<br><br>  <br><br>`<d:var name="LinkerSymbol2" type="LINKER-SYMBOL" value="MyLinkerSymbol"/>`<br><br>  <br><br>`</d:lst>`|

5.2.1.14.10. FUNCTION-NAME-VALUE (函数名值)

对应的 Schema 节点：见 5.2.1.1.10 节 "FUNCTION-NAME-DEF"。

|**简单形式**|**带有外围列表的形式**|
|---|---|
|`<d:var name="myFunc" value="func1" type="FUNCTION-NAME"/>`|`<d:lst name="myFunc">`<br><br>  <br><br>`<d:var name="myFunc1" value="func1" type="FUNCTION-NAME"/>`<br><br>  <br><br>`<d:var name="myFunc2" value="func1" type="FUNCTION-NAME"/>`<br><br>  <br><br>`</d:lst>`|

5.2.1.14.11. ENUMERATION-VALUE (枚举值)

对应的 Schema 节点：见 5.2.1.1.11 节 "ENUMERATION-PARAM-DEF"。

|**简单形式**|**带有外围列表的形式**|
|---|---|
|`<d:var name="myEnum" value="Enum1" type="ENUMERATION"/>`|`<d:lst name="myEnum">`<br><br>  <br><br>`<d:var name="myEnum1" value="Enum1" type="ENUMERATION"/>`<br><br>  <br><br>`<d:var name="myEnum2" value="Enum1" type="ENUMERATION"/>`<br><br>  <br><br>`</d:lst>`|

5.2.1.14.12. REFERENCE-VALUE (引用值)

包括：REFERENCE-VALUE, CHOICE-REFERENCE-VALUE, SYMBOLIC-NAME-REFERENCE-VALUE, FOREIGN-REFERENCE-VALUE, ECUC-URI-REFERENCE-VALUE。

对应的 Schema 节点：见 5.2.1.3, 5.2.1.4, 5.2.1.5, 5.2.1.7, 5.2.1.8 节。

|**简单形式**|**带有外围列表的形式**|
|---|---|
|`<d:ref name="myRef" value="ASPath:/..." type="REFERENCE"/>`|`<d:lst name="myRef">`<br><br>  <br><br>`<d:ref name="myRef1" value="ASPath:/..." type="REFERENCE"/>`<br><br>  <br><br>`<d:ref name="myRef2" value="ASPath:/..." type="REFERENCE"/>`<br><br>  <br><br>`</d:lst>`|

5.2.1.14.13. INSTANCE-REFERENCE-VALUE (实例引用值)

对应的 Schema 节点：见 5.2.1.6 节 "INSTANCE-REFERENCE-DEF"。

|**简单形式**|**带有外围列表的形式**|
|---|---|
|`<d:ctr name="iRef" type="INSTANCE">`<br><br>  <br><br>`<d:ref name="TARGET" value="ASPath:/..." type="REFERENCE"/>`<br><br>  <br><br>`<d:lst name="CONTEXT">`<br><br>  <br><br>`<d:ref value="ASPath:/..." type="REFERENCE"/>`<br><br>  <br><br>`<d:ref value="ASPath:/..." type="REFERENCE"/>`<br><br>  <br><br>`</d:lst>`<br><br>  <br><br>`</d:ctr>`|`<d:lst name="iRef">`<br><br>  <br><br>`<d:ctr name="iRef1" type="INSTANCE">`<br><br>  <br><br>`<d:ref name="TARGET" value="ASPath:/..." type="REFERENCE"/>`<br><br>  <br><br>`<d:lst name="CONTEXT">`<br><br>  <br><br>`<d:ref value="ASPath:/..." type="REFERENCE"/>`<br><br>  <br><br>`</d:lst>`<br><br>  <br><br>`</d:ctr>`<br><br>  <br><br>`</d:lst>`|

5.2.1.14.14. 示例

(参见原文图 5.2 和 5.3)

---

### 5.2.2. 属性映射 (Attribute Mapping)

Schema 节点的属性直接映射到 Data 节点的属性。

5.2.2.1. CONFIGURATION-CLASS-AFFECTION

在 AUTOSAR 2.0/2.1 中，CONFIGURATION-CLASS-AFFECTION 定义了一个参数在不同配置变体（PreCompile, LinkTime, PostBuild）下的可见性。

在 XDM 中，这被映射到 Schema 节点的一个属性：

|**AUTOSAR**|**XDM**|
|---|---|
|`<CONFIGURATION-CLASS-AFFECTION>`<br><br>  <br><br>`<AFFECTED-REFS>`<br><br>  <br><br>`<AFFECTED-REF DEST="BOOLEAN-PARAM-DEF">`<br><br>  <br><br>`/abc..`<br><br>  <br><br>`</AFFECTED-REF>`<br><br>  <br><br>`<AFFECTED-REF DEST="STRING-PARAM-DEF">`<br><br>  <br><br>`/xyz..`<br><br>  <br><br>`</AFFECTED-REF>`<br><br>  <br><br>`</AFFECTED-REFS>`<br><br>  <br><br>`<AFFECTION-KIND>`<br><br>  <br><br>`PC-AFFECTS-PB`<br><br>  <br><br>`</AFFECTION-KIND>`<br><br>  <br><br>`</CONFIGURATION-CLASS-AFFECTION>`|`<a:a name="AFFECTED">`<br><br>  <br><br>`<a:v>ASPathDataOfSchema:/abc..</a:v>`<br><br>  <br><br>`<a:v>ASPathDataOfSchema:/xyz..</a:v>`<br><br>  <br><br>`</a:a>`<br><br>  <br><br>`<a:a name="AFFECTION-KIND" value="PCAffectsPB"/>`|

---

### 5.2.3. 使用 ECU-PD 进行 ECU-CD 的 XPath 寻址 (XPath-addressing of ECU-CD using ECU-PD)

因为可能存在许多配置（使用相同的定义），并且每个配置可能为其节点使用自己的短名称（short-names），所以**应该仅使用 Schema 节点的名称**来寻址配置节点。否则，寻址将仅适用于单个配置。

_(图 5.2. ECU-CD 内的 XPath 寻址)_

**寻址 ModuleConf 的可能 XPath 路径：**

- `ASPath:/Pkg/myRte/Generation/IntDef`
    
- `as:modconf('RteDef')[1]/Generation/Intdef`
    

如您所见，ModuleConf 可以使用其配置名称（`myRte`）进行寻址。但是，如果使用 schema 寻址（`as:modconf('RteDef')`），它将适用于任何配置——无论 ModuleConf 的名称是什么。您只需要定义要寻址哪个配置（如果一次只有一个配置，这始终是第一个配置）。

**注意：** `as:modconf()` 后面的路径是一个 XPath，而不是 SHORT-NAME 路径（否则您无法寻址 VariableNode）。因此，如果 `IntegerParamDef` 具有不等于 1 的上下限多重性，则会有一个外围列表，路径将是 `.../Generation/IntDef/*[1]`。

以下寻址 VariableNode 的可能性仅为了完整性而提及：

- `as:modconf('RteDef')[name(.)='myRte']/Generation/Intdef`
    
- `as:ref(concat(as:path(as:stod('/PkgDef/RteDef')[1]), '/Generation/IntDef'))`
    
- `/AUTOSAR/TOP-LEVEL-PACKAGES/*/ELEMENTS/myRte/Generation/Intdef`