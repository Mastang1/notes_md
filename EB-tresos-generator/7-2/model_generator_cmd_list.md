根据《EB tresos® Studio 开发手册》第 7 章节的分析，代码模板（基于文本的生成器）主要使用以下宏命令来动态生成代码：

### 1. 代码生成控制命令

- **`[!CODE!]` / `[!ENDCODE!]`**：定义输出流的起始和结束。只有这两个标签之间的内容会被写入最终文件。
- **`[!NOCODE!]` / `[!ENDNOCODE!]`**：在此块内的宏会被执行（如变量赋值），但其结果不会输出到代码文件中。
- **`[!"<Expression>"!]`**：评估 XPath 表达式或变量，并将结果直接插入代码中。
- **`[!INCLUDE "<Filename>"!]`**：包含并执行另一个模板文件的内容。

### 2. 逻辑与循环命令

- **`[!IF "<Expr>"!] / [!ELSEIF!] / [!ELSE!] / [!ENDIF!]`**：标准的条件判断，根据表达式的布尔值决定代码块的输出。
- **`[!WHEN "<Expr>"!]`**：放置在行尾的简易条件判断，若表达式为假，则整行代码不会输出。
- **`[!LOOP "<Expr>"!] /`[!ENDLOOP!]`**：遍历 XPath 选择的节点集，每次循环会将当前节点设置为 Context Node。
- **`[!SELECT "<Expr>"!] / [!ENDSELECT!]`**：将当前 Context Node 切换至表达式所选的特定节点。
- **`[!FOR "<Var>" = "<From>" TO "<To>" [STEP "<Value>"]!] / [!ENDFOR!]`**：基于数值的循环。
- **`[!BREAK!]`**：用于提前退出 `FOR`、`LOOP` 或 `SELECT` 循环。

### 3. 变量与宏定义命令

- **`[!VAR "<Name>" = "<Expr>"!]`**：定义一个全局变量并赋值。
- **`[!VAR "<Name>"!] ... [!ENDVAR!]`**：通过块内容定义复杂的变量值，支持嵌套其他宏。
- **`[!MACRO "<Name>", "<Param>"="<Default>"!] / [!ENDMACRO!]`**：定义一段可重用的宏逻辑。
- **`[!CALL "<Name>", "<Param>"="<Value>"!]`**：调用已定义的宏。

### 4. 格式化与文件控制命令

- **`[!WS ["n"]!]`**：显式插入一个或多个空格。
- **`[!CR!]`**：显式插入一个换行符（Carriage Return）。
- **`[!AUTOSPACING!]`**：启用自动间距优化，移除命令前后的多余空格和换行。
- **`[!INDENT "n"!] / [!ENDINDENT!]`**：对其包含的输出块进行统一缩进。
- **`[!SKIPFILE ["<Expr>"]!]`**：无条件或根据特定条件跳过当前文件的生成。

### 5. 消息提示与校验命令

- **`[!ERROR "<Msg>"!] / [!ENDERROR!]`**：发出错误消息并立即停止生成过程。
- **`[!WARNING "<Msg>"!] / [!ENDWARNING!]`**：发出警告消息，但不中断生成。
- **`[!INFO "<Msg>"!] / [!ENDINFO!]`**：发出普通信息消息。
- **`[!ASSERT "<Expr>", "<Msg>"!] / [!ENDASSERT!]`**：当表达式为假时发出错误并停止生成。

### 6. 注释命令

- **`[!//`**：单行注释，从该符号到行尾的内容将被忽略。
- **`[!/* ... */!]`**：多行注释，块内内容不会出现在生成的代码中。

您是否需要我为您展示如何在 `.m` 宏文件中结合使用 `[!VAR!]` 和 `[!LOOP!]` 来生成复杂的配置结构体？